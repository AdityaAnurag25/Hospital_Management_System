{% extends 'layout.html' %}

{% block content %}
    
    <div class="d-flex justify-content-between align-items-center mb-4">
    	<h2 align = 'center' class ='display-5 fw-semibold'>
        <p class="text-primary-emphasis">Welcome Administrator </p>
    	</h2>
        
        <div>
            <a href="{{url_for('admins')}}" class="btn btn-info">View All Admins</a>
            <a href="{{url_for('add_admin')}}" class="btn btn-success">Add Administrator</a>
        </div>
    </div>
    <hr>
    
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="display-5 fw-semibold">
            <p class="text-info-emphasis">Departments</p>
        </h2>
        
        <div>
            <a href="{{url_for('departments')}}" class="btn btn-info">View All Departments</a>
            <a href="{{url_for('add_department')}}" class="btn btn-success">Add Department</a>
        </div>
    </div>
    
    <table name = "department" class="table" border = True>
         <thead>
            <tr>
                <th>Department ID</th>
                <th>Department Name</th>
                <th>Number of Doctors</th>
                <th>Actions</th>
            </tr>
            <body>
                {% for department in departments %}
                    <tr>
                        <td>{{department.id}}</td>
                        <td>{{department.name}}</td>
                        <td>{{department.doctors|length}}</td>
                        <td>
                            <a href = "{{url_for('view_department', id = department.id)}}" class="btn btn-info"> View </a>
                            <a href = "{{url_for('add_doctor', id = department.id)}}" class="btn btn-success">Add Doctor</a>
                            <a href = "{{url_for('edit_department', id = department.id)}}" class="btn btn-warning">Edit Department</a>
                            <a href = "{{url_for('change_department_status', id = department.id)}}" class="btn btn-danger">Change Status</a>
                        </td>
                    </tr>
                {% endfor %}
            </body>
         </thead>
    </table>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="display-5 fw-semibold">
            <p class="text-info-emphasis">Doctors</p>
        </h2>
            <div>
                <a href="{{url_for('doctors')}}" class="btn btn-info">View All Doctors</a>
                <a href="{{url_for('add_doctor', id = 0)}}" class="btn btn-success">Add Doctor</a>
            </div>
    </div>
    
    <table name = "doctor" class="table" border = "Danger">
         <thead>
            <tr>
                <th>Doctor ID</th>
                <th>Doctor Name</th>
                <th>Department </th>
                <th>Actions</th>
            </tr>
            <body>
                {% for doctor in doctors %}
                    <tr>
                        <td>{{doctor.id}}</td>
                        <td>{{doctor.name}}</td>
                        <td>{{doctor.department.name}}</td>
                        <td>
                            <a href = "{{url_for('profile', id = doctor.id, role = 'doctor')}}" class="btn btn-info"> Profile</a>
                            <a href = "{{url_for('doctor_availability', id = doctor.id)}}" class="btn btn-secondary">Availability</a>
                            <a href="{{url_for('appointments', id = doctor.id, role = 'doctor')}}" class="btn btn-success">Appointments</a>
                            <a href = "{{url_for('change_doctor_status', id = doctor.id)}}" class="btn btn-danger">Change Status</a>
                        </td>
                    </tr>
                {% endfor %}
            </body>
         </thead>
    </table>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="display-5 fw-semibold">
            <p class="text-info-emphasis">Patients</p>
        </h2>
        <div>
            <a href="{{url_for('patients')}}" class="btn btn-info">View All Patients</a>
            <a href="{{url_for('register')}}" class="btn btn-success">Add Patient</a>
        </div>
    </div>

    <table name = "patient" class="table" border = "Danger">
         <thead>
            <tr>
                <th>Patient ID</th>
                <th>Patient Name</th>
                <th>Actions</th>
            </tr>
            <body>
                {% for patient in patients %}
                    <tr>
                        <td>{{patient.id}}</td>
                        <td>{{patient.name}}</td>
                        <td>
                            <a href = "{{url_for('profile', id = patient.id, role = 'patient')}}" class="btn btn-info">Profile</a>
                            <a href = "{{url_for('edit_profile', id = patient.id, role = 'patient')}}" class="btn btn-warning">Edit</a>
                            <a href="{{url_for('appointments', id = patient.id, role = 'patient')}}" class="btn btn-success">Appointments</a>
                            <a href = "{{url_for('change_patient_status', id = patient.id)}}" class="btn btn-danger">Change Status</a>
                        </td>
                    </tr>
                {% endfor %}
            </body>
         </thead>
    </table>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="display-5 fw-semibold">
            <p class="text-info-emphasis">Upcoming Appointments</p>
        </h2>
        <div>
            <a href="{{url_for('appointments', role = 'admin', id = session['user_id'])}}" class="btn btn-info">View All Appointments</a>
            <a href="{{url_for('departments')}}" class="btn btn-success">Book Appointment</a>
        </div>
    </div>
    <table name = "appointment" class="table" border = "Danger">
         <thead>
            <tr>
                <th>Appointment ID</th>
                <th>Patient Name</th>
                <th>Doctor Name</th>
                <th>Date</th>
                <th>Slot</th>
                <th>Actions</th>
            </tr>
            <body>
                {% for appointment in appointments %}
                    <tr>
                        <td>{{appointment.id}}</td>
                        <td>{{appointment.patient.name}}</td>
                        <td>{{appointment.doctor.name}}</td>
                        <td>{{appointment.date}}</td>
                        <td>Slot {{appointment.slot}}</td>
                        <td>
                            <a href = "{{url_for('cancel_appointment', id = appointment.id)}}" class="btn btn-danger">Cancel</a>
                        </td>
                    </tr>
                {% endfor %}
            </body>
         </thead>
    </table>
{% endblock %}