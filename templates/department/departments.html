{% extends 'layout.html' %}

{% block title %}
    HMS - Departments    
{% endblock %}

{% block content %}
    
    <h2 align = 'center' class="display-5 fw-medium">
        <p class="text-primary-emphasis"> Departments at HMS</p>
    </h2>

    <table name = "department" class="table" border>
         <thead>
            <tr>
                <th>Department ID</th>
                <th>Department Name</th>
                <th>Number of Doctors</th>
                <th>Department Status</th>
                <th>Actions</th>
            </tr>
            <body>
                {% for department in departments %}
                    <tr>
                        <td>{{department.id}}</td>
                        <td>{{department.name}}</td>
                        <td>{{department.doctors|length}}</td>
                        <td>{{department.status}}</td>
                        <td>
                            <a href = "{{url_for('view_department', id = department.id)}}" class="btn btn-info"> Details </a>

                            {% if session['role'] == 'admin' %}
                                <a href = "{{url_for('add_doctor', id = department.id)}}" class="btn btn-success">Add Doctor</a>
                                <a href = "{{url_for('edit_department', id = department.id)}}" class="btn btn-warning">Edit Department</a>
                                <a href = "{{url_for('change_department_status', id = department.id)}}" class="btn btn-danger">Change Status</a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </body>
         </thead>
    </table>
{% endblock %}